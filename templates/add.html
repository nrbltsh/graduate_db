{% extends 'base.html' %}
{% block title %}Добавить выпускника{% endblock %}
{% block content %}
<h1>Добавить выпускника</h1>
<form method="post" enctype="multipart/form-data">
    <div class="mb-3">
        <label class="form-label">Имя</label>
        <input type="text" class="form-control" name="name" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Группа</label>
        <input type="text" class="form-control" name="group" placeholder="Введите группу, например, ПИ-1-21" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Год выпуска</label>
        <input type="text" class="form-control" name="graduation_year" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Факультет</label>
        <input type="text" class="form-control" name="faculty" placeholder="Введите факультет, например, ИТ" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Биография</label>
        <textarea class="form-control" name="bio" rows="5"></textarea>
    </div>
    <div class="mb-3">
        <label class="form-label">Фото</label>
        <input type="file" class="form-control" name="photo" accept="image/*">
    </div>
    <div class="mb-3">
        <label class="form-label">Теги (выберите или введите новые)</label>
        <select class="form-control tags-select" name="tags" multiple>
            {% for tag in tags %}
            <option value="{{ tag.name }}">{{ tag.name }}</option>
            {% endfor %}
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Добавить</button>
    <a href="{{ url_for('main.index') }}" class="btn btn-secondary">Отмена</a>
</form>

<!-- Подключение Choices.js только для тегов -->
<link href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Инициализация для тегов
        const tagsSelect = document.querySelector('.tags-select');
        new Choices(tagsSelect, {
            removeItemButton: true,
            allowHTML: false,
            placeholderValue: 'Введите теги',
            noResultsText: 'Тег не найден, введите новый',
            addItems: true,
            duplicateItemsAllowed: false,
        });
    });
</script>
{% endblock %}